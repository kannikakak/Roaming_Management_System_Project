# Database Configuration
DB_USER=roaming_user
DB_PASSWORD=changeme
DB_NAME=roaming_interconnect
DB_HOST=localhost
DB_PORT=3306
DB_SSL_ENABLED=false
DB_SSL_REQUIRED=false
DB_SSL_REJECT_UNAUTHORIZED=true
DB_SSL_CA=
DB_SSL_CERT=
DB_SSL_KEY=
DB_BLOCK_ENCRYPTION_MODE=aes-256-ecb

# Backend Configuration
PORT=5000
NODE_ENV=development
JWT_SECRET=your-super-secret-jwt-key-change-this
REFRESH_TOKEN_SECRET=your-super-secret-refresh-token-key-change-this
FRONTEND_URL=http://localhost
CORS_ORIGIN=http://localhost:3000
FORCE_HTTPS=false
ALLOW_INSECURE_HTTP=false
MFA_NUMBER_MATCHING=true
AUTH_LOCAL_LOGIN_ENABLED=true
AUTH_LOCAL_REGISTER_ENABLED=true
AUTH_RATE_LIMIT_WINDOW_MS=600000
AUTH_RATE_LIMIT_MAX=20
FILE_UPLOAD_RATE_LIMIT_WINDOW_MS=600000
FILE_UPLOAD_RATE_LIMIT_MAX=30
INGESTION_RATE_LIMIT_WINDOW_MS=600000
INGESTION_RATE_LIMIT_MAX=20
MS_TENANT_ID=common
MS_CLIENT_ID=
MS_CLIENT_SECRET=
MS_REDIRECT_URI=http://localhost:5000/api/auth/microsoft/callback
MS_SCOPE=openid profile email
MS_DEFAULT_ROLE=viewer
MS_TRUST_UPSTREAM_MFA=true

# Bootstrap Admin (optional)
# If set, the backend will create/ensure an initial admin user on startup.
BOOTSTRAP_ADMIN_EMAIL=
BOOTSTRAP_ADMIN_PASSWORD=
BOOTSTRAP_ADMIN_NAME=Admin
BOOTSTRAP_ADMIN_RESET_PASSWORD=false

# Redis (for background jobs)
REDIS_HOST=localhost
REDIS_PORT=6379

# Encryption
DATA_ENCRYPTION_KEY=your-32-character-encryption-key
DATA_ENCRYPTION_REQUIRED=false

# Data retention
DATA_RETENTION_ENABLED=false
DATA_RETENTION_DAYS=90
DATA_RETENTION_MODE=archive
DATA_RETENTION_DELETE_FILES=true
DATA_RETENTION_CHECK_HOURS=24

# File Upload
UPLOAD_MAX_FILE_SIZE_MB=150
UPLOAD_MAX_FILES=10
UPLOAD_MAX_ROWS=500000
UPLOAD_MAX_COLUMNS=200
UPLOAD_MAX_CELL_LENGTH=5000
UPLOAD_ROW_BATCH_SIZE=400

# Malware scanning (optional)
MALWARE_SCAN_ENABLED=true
MALWARE_SCAN_ALLOW_MISSING=true
MALWARE_SCAN_CMD=clamscan

# Ingestion polling (auto-detect new/updated files from sources)
ENABLE_INGESTION_RUNNER=true
INGEST_POLL_SECONDS=60
INGEST_STABLE_SECONDS=60
INGEST_MAX_DEPTH=6
INGEST_MAX_FILES=5000

# Backup & Restore
BACKUP_SCHEDULER_ENABLED=false
BACKUP_INTERVAL_HOURS=24
BACKUP_RUN_ON_STARTUP=false
BACKUP_DIR=./backups
BACKUP_RESTORE_BATCH_SIZE=500

# Alert Center (dynamic detection tuning)
ALERT_DETECTION_INTERVAL_MINUTES=15
ALERT_LOOKBACK_DAYS=45
ALERT_ROW_LIMIT=50000
ALERT_REVENUE_DROP_THRESHOLD=0.5
ALERT_TRAFFIC_SPIKE_THRESHOLD=1.0
ALERT_BASELINE_WINDOW_DAYS=7
ALERT_MIN_HISTORY_POINTS=4
ALERT_MIN_DAILY_ROWS=3
ALERT_MIN_BASELINE_REVENUE=5
ALERT_MIN_BASELINE_TRAFFIC=50
ALERT_DYNAMIC_VOLATILITY_MULTIPLIER=0.6
ALERT_MAX_REVENUE_DROP_THRESHOLD=0.85
ALERT_MAX_TRAFFIC_SPIKE_THRESHOLD=2.5
ALERT_ANOMALY_Z_THRESHOLD=3
ALERT_ANOMALY_HIGH_Z_THRESHOLD=4

# Frontend auth mode
# hybrid: Microsoft + local form
# microsoft: show Microsoft-only sign in
REACT_APP_AUTH_MODE=hybrid
REACT_APP_MICROSOFT_AUTO_REDIRECT=false
